{"code":"!function(e){var t={};function o(r){if(t[r])return t[r].exports;var l=t[r]={i:r,l:!1,exports:{}};return e[r].call(l.exports,l,l.exports,o),l.l=!0,l.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var l in e)o.d(r,l,function(t){return e[t]}.bind(null,l));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,\"a\",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p=\"\",o(o.s=0)}([function(e,t,o){\"use strict\";o.r(t);class r{constructor(e,t=INIT_X,o=INIT_Y){this.color=e.color,this.cells=e.cells,this.x=t,this.y=o,this.preX=t,this.preY=o}moveX(e){this.preX=this.x,this.x+=e}moveY(e){this.preY=this.y,this.y+=e}print(){for(let e of this.cells)printCell(this.x+e.x,this.y+e.y,this.color)}clear(){for(let e of this.cells)clearCell(this.x+e.x,this.y+e.y)}rotate(){for(let e of this.cells){let t=e.x;e.x=e.y,e.y=t}}}let l,n;var i=!1,s=!1,c=!1;let y=0;const a=\"rgb(225,225,225)\";var u,x;class d{constructor(e,t){this.map=new Array(t);for(let o=0;o<t;o++)this.map[o]=new Array(e).fill(!1)}isCollideBlock(e,t,o){for(let r of e.cells)if(this.isExistCell(r.x+t,r.y+o))return console.log(\"true\"),!0;return!1}isExistCell(e,t){return!g(e,t)||this.map[e][t]}putBlock(e){for(let t of e.cells)this.map[t.x+e.x][t.y+e.y]=!0}checkLine(){}deleteLine(){}}const f=[{color:\"rgb(240,0,0)\",cells:[{x:2,y:0},{x:1,y:1},{x:2,y:1},{x:1,y:2}]},{color:\"rgb(0,0,240)\",cells:[{x:1,y:0},{x:2,y:0},{x:1,y:1},{x:1,y:2}]},{color:\"rgb(0,245,0)\",cells:[{x:1,y:1},{x:2,y:1},{x:0,y:2},{x:1,y:2}]},{color:\"rgb(250,250,0)\",cells:[{x:1,y:1},{x:2,y:1},{x:1,y:2},{x:2,y:2}]},{color:\"rgb(0,245,245)\",cells:[{x:1,y:0},{x:1,y:1},{x:1,y:2},{x:1,y:3}]},{color:\"rgb(255,0,255)\",cells:[{x:0,y:1},{x:1,y:1},{x:2,y:1},{x:1,y:2}]},{color:\"rgb(255,165,0)\",cells:[{x:1,y:0},{x:1,y:1},{x:1,y:2},{x:2,y:2}]}],h=()=>{var e=requestAnimationFrame(h);if(++y%30==0)if(x.isCollideBlock(u,u.x,u.y+1)){if(0==u.y)return u.print(),cancelAnimationFrame(e),void requestAnimationFrame(p);x.putBlock(u),console.log(\"put (x,y) = \"+u.x+u.y),u=new r(f[Math.floor(7*Math.random())])}else u.clear(),u.moveY(1),i?x.isCollideBlock(u,u.x+1,u.y)||u.moveX(1):s?x.isCollideBlock(u,u.x-1,u.y)||u.moveX(-1):c&&u.rotate(),m()},p=()=>{console.log(\"game over\")},m=()=>{u.print()},g=(e,t)=>0<=e&&e<10&&0<=t&&t<20;window.addEventListener(\"load\",()=>{l=document.getElementById(\"maincanvas\"),n=l.getContext(\"2d\"),l.width=200,l.height=400,n.fillStyle=a,n.fillRect(0,0,l.width,l.height),n.lineWidth=2,x=new d(10,20),u=new r(f[6]),requestAnimationFrame(h)}),document.addEventListener(\"keydown\",e=>{console.log(e.keyCode),39==e.keyCode?i=!0:37==e.keyCode?s=!0:38==e.keyCode&&(c=!0)},!1),document.addEventListener(\"keyup\",e=>{39==e.keyCode?i=!1:37==e.keyCode?s=!1:38==e.keyCode&&(c=!1)},!1)}]);","extractedComments":[]}